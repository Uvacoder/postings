var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;import{S as s,i as o,s as l,O as i,e as c,j as u,k as f,t as d,c as h,a as m,m as p,n as $,g,d as v,b as E,f as P,M as b,o as y,N as w,x as T,P as O,Q as I,u as N,v as U,R as S,r as k,w as A,K as L,T as B,U as x,V as D,W as j,h as C,X as R,Y as _,Z as M,_ as V,a0 as H,a1 as F,l as G,a2 as W,a3 as Y,a4 as q,a5 as J,a6 as X,a7 as K,a8 as Q,a9 as Z,aa as z,ab as tt,ac as et,ad as at,ae as rt,af as nt,ag as st,ah as ot,A as lt,ai as it,aj as ct,ak as ut,al as ft,am as dt,L as ht,an as mt,ao as pt,ap as $t}from"../chunks/vendor-378a721b.js";import{a as gt,f as vt,b as Et,o as Pt}from"../chunks/stores-55591c9d.js";function bt(t){let e,a,r,n,s,o,l,k;return r=new i({props:{"aria-label":"Offline Cloud"}}),{c(){e=c("div"),a=c("div"),u(r.$$.fragment),n=f(),s=c("p"),o=d("You are currently offline. Changes will be synced when you re-connect"),this.h()},l(t){e=h(t,"DIV",{class:!0});var l=m(e);a=h(l,"DIV",{});var i=m(a);p(r.$$.fragment,i),n=$(i),s=h(i,"P",{});var c=m(s);o=g(c,"You are currently offline. Changes will be synced when you re-connect"),c.forEach(v),i.forEach(v),l.forEach(v),this.h()},h(){E(e,"class","banner")},m(t,l){P(t,e,l),b(e,a),y(r,a,null),b(a,n),b(a,s),b(s,o),k=!0},p:w,i(t){k||(T(r.$$.fragment,t),O((()=>{l||(l=I(e,S,{},!0)),l.run(1)})),k=!0)},o(t){N(r.$$.fragment,t),l||(l=I(e,S,{},!1)),l.run(0),k=!1},d(t){t&&v(e),U(r),t&&l&&l.end()}}}class yt extends s{constructor(t){super(),o(this,t,null,bt,l,{})}}function wt(t){let e,a,r;return{c(){e=c("footer"),a=c("h3"),r=d("Made with 游댠 by Jake Ord & 游낼")},l(t){e=h(t,"FOOTER",{});var n=m(e);a=h(n,"H3",{});var s=m(a);r=g(s,"Made with 游댠 by Jake Ord & 游낼"),s.forEach(v),n.forEach(v)},m(t,n){P(t,e,n),b(e,a),b(a,r)},p:w,i:w,o:w,d(t){t&&v(e)}}}class Tt extends s{constructor(t){super(),o(this,t,null,wt,l,{})}}function Ot(t){let e,a,r,n,s,o,l,i,u,d=t[2]>548&&Nt(t);const p=[St,Ut],g=[];function y(t,e){return t[2]<548?0:1}return s=y(t),o=g[s]=p[s](t),{c(){e=c("div"),a=c("figure"),d&&d.c(),r=f(),n=c("button"),o.c(),this.h()},l(t){e=h(t,"DIV",{class:!0});var s=m(e);a=h(s,"FIGURE",{class:!0});var l=m(a);d&&d.l(l),l.forEach(v),r=$(s),n=h(s,"BUTTON",{class:!0});var i=m(n);o.l(i),i.forEach(v),s.forEach(v),this.h()},h(){E(a,"class","user-info"),E(n,"class","btn danger"),E(e,"class","user-bar")},m(o,c){P(o,e,c),b(e,a),d&&d.m(a,null),b(e,r),b(e,n),g[s].m(n,null),l=!0,i||(u=R(n,"click",t[4]),i=!0)},p(t,e){t[2]>548?d?d.p(t,e):(d=Nt(t),d.c(),d.m(a,null)):d&&(d.d(1),d=null);let r=s;s=y(t),s!==r&&(k(),N(g[r],1,1,(()=>{g[r]=null})),A(),o=g[s],o||(o=g[s]=p[s](t),o.c()),T(o,1),o.m(n,null))},i(t){l||(T(o),l=!0)},o(t){N(o),l=!1},d(t){t&&v(e),d&&d.d(),g[s].d(),i=!1,u()}}}function It(t){let e,a,r,n,s,o;const l=[At,kt],i=[];function u(t,e){return t[2]<548?0:1}return a=u(t),r=i[a]=l[a](t),{c(){e=c("button"),r.c(),this.h()},l(t){e=h(t,"BUTTON",{class:!0});var a=m(e);r.l(a),a.forEach(v),this.h()},h(){E(e,"class","btn secondary")},m(r,l){P(r,e,l),i[a].m(e,null),n=!0,s||(o=R(e,"click",t[3]),s=!0)},p(t,n){let s=a;a=u(t),a!==s&&(k(),N(i[s],1,1,(()=>{i[s]=null})),A(),r=i[a],r||(r=i[a]=l[a](t),r.c()),T(r,1),r.m(e,null))},i(t){n||(T(r),n=!0)},o(t){N(r),n=!1},d(t){t&&v(e),i[a].d(),s=!1,o()}}}function Nt(t){let e,a,r,n,s,o,l=t[0].user.username+"";return{c(){e=c("figcaption"),a=d(l),r=f(),n=c("img"),this.h()},l(t){e=h(t,"FIGCAPTION",{});var s=m(e);a=g(s,l),s.forEach(v),r=$(t),n=h(t,"IMG",{src:!0,alt:!0}),this.h()},h(){j(n.src,s=t[0].user.avatar)||E(n,"src",s),E(n,"alt",o=`Profile of ${t[0].user.username}`)},m(t,s){P(t,e,s),b(e,a),P(t,r,s),P(t,n,s)},p(t,e){1&e&&l!==(l=t[0].user.username+"")&&C(a,l),1&e&&!j(n.src,s=t[0].user.avatar)&&E(n,"src",s),1&e&&o!==(o=`Profile of ${t[0].user.username}`)&&E(n,"alt",o)},d(t){t&&v(e),t&&v(r),t&&v(n)}}}function Ut(t){let e;return{c(){e=d("Sign Out")},l(t){e=g(t,"Sign Out")},m(t,a){P(t,e,a)},i:w,o:w,d(t){t&&v(e)}}}function St(t){let e,a;return e=new _({props:{"aria-label":"Sign Out"}}),{c(){u(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){y(e,t,r),a=!0},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function kt(t){let e;return{c(){e=d("Sign In With Google")},l(t){e=g(t,"Sign In With Google")},m(t,a){P(t,e,a)},i:w,o:w,d(t){t&&v(e)}}}function At(t){let e,a;return e=new M({props:{"aria-label":"Sign In With Google"}}),{c(){u(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){y(e,t,r),a=!0},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Lt(t){let e,a,r,n,s,o,l;const i=[It,Ot],u=[];function p(t,e){return t[0].user?1:0}return s=p(t),o=u[s]=i[s](t),{c(){e=c("header"),a=c("h1"),r=d("游낼 My Posts List"),n=f(),o.c()},l(t){e=h(t,"HEADER",{});var s=m(e);a=h(s,"H1",{});var l=m(a);r=g(l,"游낼 My Posts List"),l.forEach(v),n=$(s),o.l(s),s.forEach(v)},m(t,o){P(t,e,o),b(e,a),b(a,r),b(e,n),u[s].m(e,null),l=!0},p(t,[a]){let r=s;s=p(t),s===r?u[s].p(t,a):(k(),N(u[r],1,1,(()=>{u[r]=null})),A(),o=u[s],o?o.p(t,a):(o=u[s]=i[s](t),o.c()),T(o,1),o.m(e,null))},i(t){l||(T(o),l=!0)},o(t){N(o),l=!1},d(t){t&&v(e),u[s].d()}}}function Bt(t,e,a){let r,n,s;L(t,gt,(t=>a(0,r=t))),L(t,vt,(t=>a(1,n=t))),L(t,Et,(t=>a(2,s=t)));return[r,n,s,()=>B(n.auth,new x),()=>D(n.auth)]}class xt extends s{constructor(t){super(),o(this,t,Bt,Lt,l,{})}}function Dt(t){let e,a;return{c(){e=c("h2"),a=d("Sign in to start adding posts")},l(t){e=h(t,"H2",{});var r=m(e);a=g(r,"Sign in to start adding posts"),r.forEach(v)},m(t,r){P(t,e,r),b(e,a)},p:w,d(t){t&&v(e)}}}function jt(t){let e,a,r,n,s,o,l,i=t[3]?"Hide Form":"Add Post";return{c(){e=c("button"),a=d(i),r=f(),n=c("button"),s=d("Update Profile"),this.h()},l(t){e=h(t,"BUTTON",{class:!0});var o=m(e);a=g(o,i),o.forEach(v),r=$(t),n=h(t,"BUTTON",{tabindex:!0,class:!0});var l=m(n);s=g(l,"Update Profile"),l.forEach(v),this.h()},h(){E(e,"class","btn"),E(n,"tabindex","0"),E(n,"class","btn link right")},m(i,c){P(i,e,c),b(e,a),P(i,r,c),P(i,n,c),b(n,s),o||(l=[R(e,"click",t[6]),R(n,"click",t[7])],o=!0)},p(t,e){8&e&&i!==(i=t[3]?"Hide Form":"Add Post")&&C(a,i)},d(t){t&&v(e),t&&v(r),t&&v(n),o=!1,F(l)}}}function Ct(t){let e,a,r,n,s,o,l,i,u,p,y,w,T,N,U,k,A;return{c(){e=c("form"),a=c("label"),r=d("Title"),n=f(),s=c("input"),o=f(),l=c("label"),i=d("Content"),u=f(),p=c("textarea"),y=f(),w=c("button"),T=d("Add Post"),this.h()},l(t){e=h(t,"FORM",{});var c=m(e);a=h(c,"LABEL",{for:!0});var f=m(a);r=g(f,"Title"),f.forEach(v),n=$(c),s=h(c,"INPUT",{name:!0,id:!0}),o=$(c),l=h(c,"LABEL",{for:!0});var d=m(l);i=g(d,"Content"),d.forEach(v),u=$(c),p=h(c,"TEXTAREA",{rows:!0,name:!0,id:!0}),m(p).forEach(v),y=$(c),w=h(c,"BUTTON",{type:!0,class:!0});var E=m(w);T=g(E,"Add Post"),E.forEach(v),c.forEach(v),this.h()},h(){E(a,"for","title"),s.required=!0,E(s,"name","title"),E(s,"id","title"),E(l,"for","content"),p.required=!0,E(p,"rows","10"),E(p,"name","content"),E(p,"id","content"),E(w,"type","submit"),E(w,"class","btn")},m(c,f){P(c,e,f),b(e,a),b(a,r),b(e,n),b(e,s),V(s,t[1]),b(e,o),b(e,l),b(l,i),b(e,u),b(e,p),V(p,t[2]),b(e,y),b(e,w),b(w,T),U=!0,k||(A=[R(s,"input",t[8]),R(p,"input",t[9]),R(e,"submit",H(t[5]))],k=!0)},p(t,e){2&e&&s.value!==t[1]&&V(s,t[1]),4&e&&V(p,t[2])},i(t){U||(O((()=>{N||(N=I(e,S,{},!0)),N.run(1)})),U=!0)},o(t){N||(N=I(e,S,{},!1)),N.run(0),U=!1},d(t){t&&v(e),t&&N&&N.end(),k=!1,F(A)}}}function Rt(t){let e,a,r;function n(t,e){return t[4].user?jt:Dt}let s=n(t),o=s(t),l=t[3]&&Ct(t);return{c(){o.c(),e=f(),l&&l.c(),a=G()},l(t){o.l(t),e=$(t),l&&l.l(t),a=G()},m(t,n){o.m(t,n),P(t,e,n),l&&l.m(t,n),P(t,a,n),r=!0},p(t,[r]){s===(s=n(t))&&o?o.p(t,r):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e))),t[3]?l?(l.p(t,r),8&r&&T(l,1)):(l=Ct(t),l.c(),T(l,1),l.m(a.parentNode,a)):l&&(k(),N(l,1,1,(()=>{l=null})),A())},i(t){r||(T(l),r=!0)},o(t){N(l),r=!1},d(t){o.d(t),t&&v(e),l&&l.d(t),t&&v(a)}}}function _t(t,e,a){let r,n;L(t,gt,(t=>a(4,r=t))),L(t,vt,(t=>a(10,n=t)));let{updateProfile:s}=e,o="",l="",i=!1;return t.$$set=t=>{"updateProfile"in t&&a(0,s=t.updateProfile)},[s,o,l,i,r,async()=>{try{await W(Y(n.db,"posts"),{title:o,content:l,uid:r.user.uid,created_at:q()}),a(1,o=""),a(2,l=""),a(3,i=!1)}catch(t){console.error(t.message)}},()=>a(3,i=!i),()=>a(0,s=!0),function(){o=this.value,a(1,o)},function(){l=this.value,a(2,l)}]}class Mt extends s{constructor(t){super(),o(this,t,_t,Rt,l,{updateProfile:0})}}function Vt(t){let e,a,r,n,s,o,l,i,u,p,y,w,T,I,N,U,S,k;return{c(){e=c("aside"),a=c("div"),r=c("label"),n=d("Search"),s=f(),o=c("input"),l=f(),i=c("div"),u=c("label"),p=d("Sort By"),y=f(),w=c("select"),T=c("option"),I=d("title"),N=c("option"),U=d("content"),this.h()},l(t){e=h(t,"ASIDE",{});var c=m(e);a=h(c,"DIV",{class:!0});var f=m(a);r=h(f,"LABEL",{for:!0});var d=m(r);n=g(d,"Search"),d.forEach(v),s=$(f),o=h(f,"INPUT",{name:!0,id:!0}),f.forEach(v),l=$(c),i=h(c,"DIV",{class:!0});var E=m(i);u=h(E,"LABEL",{for:!0});var P=m(u);p=g(P,"Sort By"),P.forEach(v),y=$(E),w=h(E,"SELECT",{name:!0,id:!0});var b=m(w);T=h(b,"OPTION",{});var O=m(T);I=g(O,"title"),O.forEach(v),N=h(b,"OPTION",{});var S=m(N);U=g(S,"content"),S.forEach(v),b.forEach(v),E.forEach(v),c.forEach(v),this.h()},h(){E(r,"for","search"),E(o,"name","search"),E(o,"id","search"),E(a,"class","field"),E(u,"for","sort"),T.__value="title",T.value=T.__value,N.__value="content",N.value=N.__value,E(w,"name","sort"),E(w,"id","sort"),void 0===t[0]&&O((()=>t[7].call(w))),E(i,"class","field")},m(c,f){P(c,e,f),b(e,a),b(a,r),b(r,n),b(a,s),b(a,o),V(o,t[1]),b(e,l),b(e,i),b(i,u),b(u,p),b(i,y),b(i,w),b(w,T),b(T,I),b(w,N),b(N,U),J(w,t[0]),S||(k=[R(o,"input",t[6]),R(w,"change",t[7])],S=!0)},p(t,e){2&e&&o.value!==t[1]&&V(o,t[1]),1&e&&J(w,t[0])},d(t){t&&v(e),S=!1,F(k)}}}function Ht(t){let e,a=t[2]&&Vt(t);return{c(){a&&a.c(),e=G()},l(t){a&&a.l(t),e=G()},m(t,r){a&&a.m(t,r),P(t,e,r)},p(t,[r]){t[2]?a?a.p(t,r):(a=Vt(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:w,o:w,d(t){a&&a.d(t),t&&v(e)}}}function Ft(t,e,a){let r,n;L(t,gt,(t=>a(5,n=t)));let{filteredPosts:s}=e,o="title",l="",i=!1;return t.$$set=t=>{"filteredPosts"in t&&a(3,s=t.filteredPosts)},t.$$.update=()=>{var e;if(2&t.$$.dirty&&a(4,r=new RegExp(l,"gi")),32&t.$$.dirty&&((null==(e=n.posts)?void 0:e.length)>0?a(2,i=!0):a(2,i=!1)),50&t.$$.dirty)if(l){const t=n.posts.filter((t=>(t.title+t.content).match(r)));console.log(t),a(3,s=t)}else a(3,s=n.posts);1&t.$$.dirty&&(t=>{const e={title:"title",content:"content"}[t],n=[...s].sort(((t,a)=>(t=t[e].match(r))<(a=a[e].match(r))?-1:t>a?1:0));a(3,s=n)})(o)},[o,l,i,s,r,n,function(){l=this.value,a(1,l)},function(){o=X(this),a(0,o)}]}class Gt extends s{constructor(t){super(),o(this,t,Ft,Ht,l,{filteredPosts:3})}}function Wt(t){let e,a,r,n,s,o,l,i,u,p,y,T,I,N,U,S,k=t[0].id+"",A=t[0].title+"",L=t[0].content+"";return{c(){e=c("article"),a=c("strong"),r=d("Post ID: "),n=d(k),s=f(),o=c("h2"),l=d(A),i=f(),u=c("p"),p=d(L),y=f(),T=c("button"),I=d("Delete Post"),this.h()},l(t){e=h(t,"ARTICLE",{});var c=m(e);a=h(c,"STRONG",{});var f=m(a);r=g(f,"Post ID: "),n=g(f,k),f.forEach(v),s=$(c),o=h(c,"H2",{});var d=m(o);l=g(d,A),d.forEach(v),i=$(c),u=h(c,"P",{});var E=m(u);p=g(E,L),E.forEach(v),y=$(c),T=h(c,"BUTTON",{class:!0});var P=m(T);I=g(P,"Delete Post"),P.forEach(v),c.forEach(v),this.h()},h(){E(T,"class","btn danger")},m(c,f){P(c,e,f),b(e,a),b(a,r),b(a,n),b(e,s),b(e,o),b(o,l),b(e,i),b(e,u),b(u,p),b(e,y),b(e,T),b(T,I),U||(S=R(T,"click",t[2]),U=!0)},p(t,[e]){1&e&&k!==(k=t[0].id+"")&&C(n,k),1&e&&A!==(A=t[0].title+"")&&C(l,A),1&e&&L!==(L=t[0].content+"")&&C(p,L)},i(t){N||O((()=>{N=K(e,Q,{}),N.start()}))},o:w,d(t){t&&v(e),U=!1,S()}}}function Yt(t,e,a){let{post:r}=e,{deletePost:n}=e;return t.$$set=t=>{"post"in t&&a(0,r=t.post),"deletePost"in t&&a(1,n=t.deletePost)},[r,n,()=>n(r.id)]}class qt extends s{constructor(t){super(),o(this,t,Yt,Wt,l,{post:0,deletePost:1})}}function Jt(t,e,a){const r=t.slice();return r[3]=e[a],r}function Xt(t){let e,a;return e=new qt({props:{post:t[3],deletePost:t[1]}}),{c(){u(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){y(e,t,r),a=!0},p(t,a){const r={};1&a&&(r.post=t[3]),e.$set(r)},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function Kt(t){let e,a,r=t[0],n=[];for(let o=0;o<r.length;o+=1)n[o]=Xt(Jt(t,r,o));const s=t=>N(n[t],1,1,(()=>{n[t]=null}));return{c(){e=c("section");for(let t=0;t<n.length;t+=1)n[t].c()},l(t){e=h(t,"SECTION",{});var a=m(e);for(let e=0;e<n.length;e+=1)n[e].l(a);a.forEach(v)},m(t,r){P(t,e,r);for(let a=0;a<n.length;a+=1)n[a].m(e,null);a=!0},p(t,[a]){if(3&a){let o;for(r=t[0],o=0;o<r.length;o+=1){const s=Jt(t,r,o);n[o]?(n[o].p(s,a),T(n[o],1)):(n[o]=Xt(s),n[o].c(),T(n[o],1),n[o].m(e,null))}for(k(),o=r.length;o<n.length;o+=1)s(o);A()}},i(t){if(!a){for(let t=0;t<r.length;t+=1)T(n[t]);a=!0}},o(t){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)N(n[e]);a=!1},d(t){t&&v(e),Z(n,t)}}}function Qt(t,e,a){let r;L(t,vt,(t=>a(2,r=t)));let{filteredPosts:n}=e;return t.$$set=t=>{"filteredPosts"in t&&a(0,n=t.filteredPosts)},[n,async t=>{try{await z(tt(r.db,"posts",t))}catch(e){console.error(e.message)}}]}class Zt extends s{constructor(t){super(),o(this,t,Qt,Kt,l,{filteredPosts:0})}}function zt(t){let e,a;return{c(){e=c("p"),a=d("You must include a username"),this.h()},l(t){e=h(t,"P",{class:!0});var r=m(e);a=g(r,"You must include a username"),r.forEach(v),this.h()},h(){E(e,"class","error-red")},m(t,r){P(t,e,r),b(e,a)},d(t){t&&v(e)}}}function te(t){let e;return{c(){e=d("Update")},l(t){e=g(t,"Update")},m(t,a){P(t,e,a)},d(t){t&&v(e)}}}function ee(t){let e,a,r,n,s;return{c(){e=c("div"),a=c("span"),r=f(),n=c("p"),s=d("Updating..."),this.h()},l(t){e=h(t,"DIV",{class:!0});var o=m(e);a=h(o,"SPAN",{class:!0}),m(a).forEach(v),r=$(o),n=h(o,"P",{});var l=m(n);s=g(l,"Updating..."),l.forEach(v),o.forEach(v),this.h()},h(){E(a,"class","loader"),E(e,"class","loading")},m(t,o){P(t,e,o),b(e,a),b(e,r),b(e,n),b(n,s)},d(t){t&&v(e)}}}function ae(t){let e,a,r,n,s,o,l,i,u,p,y,T,I,N,U,S,k,A,L,B,x,D,j,C,_=t[4]&&zt();function M(t,e){return t[3]?ee:te}let G=M(t),W=G(t);return{c(){e=c("div"),a=c("div"),r=c("h2"),n=d("Update Profile"),s=f(),o=c("button"),l=d("Back to Posts List"),i=f(),u=c("form"),p=c("label"),y=d("Update username"),T=f(),I=c("input"),N=f(),_&&_.c(),U=f(),S=c("label"),k=d("Change avatar (optional) (Note: We only accept jpg or png extensions)"),A=f(),L=c("input"),B=f(),x=c("button"),W.c(),this.h()},l(t){e=h(t,"DIV",{});var c=m(e);a=h(c,"DIV",{class:!0});var f=m(a);r=h(f,"H2",{});var d=m(r);n=g(d,"Update Profile"),d.forEach(v),s=$(f),o=h(f,"BUTTON",{class:!0});var E=m(o);l=g(E,"Back to Posts List"),E.forEach(v),f.forEach(v),i=$(c),u=h(c,"FORM",{class:!0});var P=m(u);p=h(P,"LABEL",{for:!0});var b=m(p);y=g(b,"Update username"),b.forEach(v),T=$(P),I=h(P,"INPUT",{name:!0,id:!0}),N=$(P),_&&_.l(P),U=$(P),S=h(P,"LABEL",{for:!0});var w=m(S);k=g(w,"Change avatar (optional) (Note: We only accept jpg or png extensions)"),w.forEach(v),A=$(P),L=h(P,"INPUT",{type:!0,accept:!0,name:!0,id:!0}),B=$(P),x=h(P,"BUTTON",{type:!0,class:!0});var O=m(x);W.l(O),O.forEach(v),P.forEach(v),c.forEach(v),this.h()},h(){E(o,"class","btn link"),E(a,"class","update-header"),E(p,"for","username"),E(I,"name","username"),E(I,"id","username"),et(I,"error",t[4]),E(S,"for","avatar"),E(L,"type","file"),E(L,"accept","image/png, image/jpeg"),E(L,"name","avatar"),E(L,"id","avatar"),E(x,"type","submit"),E(x,"class","btn"),E(u,"class","update-form")},m(c,f){P(c,e,f),b(e,a),b(a,r),b(r,n),b(a,s),b(a,o),b(o,l),b(e,i),b(e,u),b(u,p),b(p,y),b(u,T),b(u,I),V(I,t[1]),b(u,N),_&&_.m(u,null),b(u,U),b(u,S),b(S,k),b(u,A),b(u,L),b(u,B),b(u,x),W.m(x,null),j||(C=[R(o,"click",t[6]),R(I,"input",t[7]),R(L,"change",t[8]),R(u,"submit",H(t[5]))],j=!0)},p(t,[e]){2&e&&I.value!==t[1]&&V(I,t[1]),16&e&&et(I,"error",t[4]),t[4]?_||(_=zt(),_.c(),_.m(u,U)):_&&(_.d(1),_=null),G!==(G=M(t))&&(W.d(1),W=G(t),W&&(W.c(),W.m(x,null)))},i(t){D||O((()=>{D=K(e,at,{x:-100}),D.start()}))},o:w,d(t){t&&v(e),_&&_.d(),W.d(),j=!1,F(C)}}}function re(t,e,a){let r,n;L(t,gt,(t=>a(9,r=t))),L(t,vt,(t=>a(10,n=t)));let{updateProfile:s}=e,o="",l=null,i=!1,c=!1;return t.$$set=t=>{"updateProfile"in t&&a(0,s=t.updateProfile)},[s,o,l,i,c,async()=>{try{if(a(3,i=!0),0===o.length)return void a(4,c=!0);if(l){const t=rt(n.storage,l[0].name);await nt(t,l[0]),await st(tt(n.db,"users",r.user.uid),{username:o||"",avatar:await ot(t)}),a(4,c=!1)}else await st(tt(n.db,"users",r.user.uid),{username:o}),a(4,c=!1)}catch(t){console.error(t.message)}finally{a(3,i=!1)}},()=>a(0,s=!1),function(){o=this.value,a(1,o)},function(){l=this.files,a(2,l)}]}class ne extends s{constructor(t){super(),o(this,t,re,ae,l,{updateProfile:0})}}function se(t){let e,a,r,n,s,o,l,i,c;function d(e){t[4](e)}let h={};function m(e){t[5](e)}void 0!==t[0]&&(h.updateProfile=t[0]),e=new Mt({props:h}),ct.push((()=>ut(e,"updateProfile",d)));let g={};function E(e){t[6](e)}void 0!==t[1]&&(g.filteredPosts=t[1]),n=new Gt({props:g}),ct.push((()=>ut(n,"filteredPosts",m)));let b={};return void 0!==t[1]&&(b.filteredPosts=t[1]),l=new Zt({props:b}),ct.push((()=>ut(l,"filteredPosts",E))),{c(){u(e.$$.fragment),r=f(),u(n.$$.fragment),o=f(),u(l.$$.fragment)},l(t){p(e.$$.fragment,t),r=$(t),p(n.$$.fragment,t),o=$(t),p(l.$$.fragment,t)},m(t,a){y(e,t,a),P(t,r,a),y(n,t,a),P(t,o,a),y(l,t,a),c=!0},p(t,r){const o={};!a&&1&r&&(a=!0,o.updateProfile=t[0],ft((()=>a=!1))),e.$set(o);const c={};!s&&2&r&&(s=!0,c.filteredPosts=t[1],ft((()=>s=!1))),n.$set(c);const u={};!i&&2&r&&(i=!0,u.filteredPosts=t[1],ft((()=>i=!1))),l.$set(u)},i(t){c||(T(e.$$.fragment,t),T(n.$$.fragment,t),T(l.$$.fragment,t),c=!0)},o(t){N(e.$$.fragment,t),N(n.$$.fragment,t),N(l.$$.fragment,t),c=!1},d(t){U(e,t),t&&v(r),U(n,t),t&&v(o),U(l,t)}}}function oe(t){let e,a,r;function n(e){t[3](e)}let s={};return void 0!==t[0]&&(s.updateProfile=t[0]),e=new ne({props:s}),ct.push((()=>ut(e,"updateProfile",n))),{c(){u(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,a){y(e,t,a),r=!0},p(t,r){const n={};!a&&1&r&&(a=!0,n.updateProfile=t[0],ft((()=>a=!1))),e.$set(n)},i(t){r||(T(e.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function le(t){let e,a;return e=new yt({}),{c(){u(e.$$.fragment)},l(t){p(e.$$.fragment,t)},m(t,r){y(e,t,r),a=!0},i(t){a||(T(e.$$.fragment,t),a=!0)},o(t){N(e.$$.fragment,t),a=!1},d(t){U(e,t)}}}function ie(t){let e,a,r,n,s,o,l,i,w,O,I,S,L;n=new xt({});const B=[oe,se],x=[];function D(t,e){return t[0]?0:1}l=D(t),i=x[l]=B[l](t),O=new Tt({});let j=t[2]&&le();return{c(){e=c("a"),a=d("Skip to content"),r=f(),u(n.$$.fragment),s=f(),o=c("main"),i.c(),w=f(),u(O.$$.fragment),I=f(),j&&j.c(),S=G(),this.h()},l(t){e=h(t,"A",{class:!0,href:!0});var l=m(e);a=g(l,"Skip to content"),l.forEach(v),r=$(t),p(n.$$.fragment,t),s=$(t),o=h(t,"MAIN",{id:!0});var c=m(o);i.l(c),c.forEach(v),w=$(t),p(O.$$.fragment,t),I=$(t),j&&j.l(t),S=G(),this.h()},h(){E(e,"class","skip-link"),E(e,"href","#main"),E(o,"id","main")},m(t,i){P(t,e,i),b(e,a),P(t,r,i),y(n,t,i),P(t,s,i),P(t,o,i),x[l].m(o,null),P(t,w,i),y(O,t,i),P(t,I,i),j&&j.m(t,i),P(t,S,i),L=!0},p(t,[e]){let a=l;l=D(t),l===a?x[l].p(t,e):(k(),N(x[a],1,1,(()=>{x[a]=null})),A(),i=x[l],i?i.p(t,e):(i=x[l]=B[l](t),i.c()),T(i,1),i.m(o,null)),t[2]?j?4&e&&T(j,1):(j=le(),j.c(),T(j,1),j.m(S.parentNode,S)):j&&(k(),N(j,1,1,(()=>{j=null})),A())},i(t){L||(T(n.$$.fragment,t),T(i),T(O.$$.fragment,t),T(j),L=!0)},o(t){N(n.$$.fragment,t),N(i),N(O.$$.fragment,t),N(j),L=!1},d(t){t&&v(e),t&&v(r),U(n,t),t&&v(s),t&&v(o),x[l].d(),t&&v(w),U(O,t),t&&v(I),j&&j.d(t),t&&v(S)}}}function ce(t,s,o){let l,i,c;L(t,gt,(t=>o(7,l=t))),L(t,vt,(t=>o(8,i=t))),L(t,Pt,(t=>o(2,c=t)));let u=!1,f=[];return lt((()=>{const t=it(i.auth,(async t=>{try{if(t){const s=await dt(tt(i.db,"users",t.uid),(t=>ht(gt,l.user=t.data(),l)));await dt(mt(Y(i.db,"posts"),pt("uid","==",t.uid)),(t=>ht(gt,l.posts=t.docs.map((t=>((t,s)=>{for(var o in s||(s={}))a.call(s,o)&&n(t,o,s[o]);if(e)for(var o of e(s))r.call(s,o)&&n(t,o,s[o]);return t})({id:t.id},t.data()))),l))),s||await $t(tt(i.db,"users",t.uid),{uid:t.uid,username:t.displayName,email:t.email,avatar:t.photoURL,created_at:q()})}else ht(gt,l.user=null,l),ht(gt,l.posts=[],l)}catch(s){console.error(s)}}));return()=>t()})),[u,f,c,function(t){u=t,o(0,u)},function(t){u=t,o(0,u)},function(t){f=t,o(1,f)},function(t){f=t,o(1,f)}]}class ue extends s{constructor(t){super(),o(this,t,ce,ie,l,{})}}export{ue as default};
